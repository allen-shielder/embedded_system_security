## ✅ 网络安全按OSI分层（7层模型）

| 层级        | 安全措施                             |
| --------- | -------------------------------- |
| **物理层**   | 物理访问控制、防止接入电缆、端口锁死               |
| **数据链路层** | MAC地址过滤、VLAN隔离、802.1X（基于端口的身份认证） |
| **网络层**   | 防火墙、VPN、入侵检测/防御系统（IDS/IPS）       |
| **传输层**   | **TLS/SSL：加密、身份验证、数据完整性**        |
| **会话层**   | 会话劫持防护、超时机制、会话管理                 |
| **应用层**   | 防SQL注入、XSS等攻击；安全编程、补丁管理、应用层防火墙   |
|           |                                  |

---

## ✅ 核心协议逐个总结（建议掌握前6个）

### 1. **TCP/IP**

- **TCP**：可靠传输、顺序到达、流量/拥塞控制、有连接
    
- **IP**：基于地址的数据发送机制，无连接
    

---

### 2. **TLS（Transport Layer Security）**

- 替代 SSL，是网络安全标准协议（IETF标准）
    
- 用于保护客户端与服务器之间的数据传输安全
    
- **组成**：
    
    - TLS Record Protocol：数据加密
        
    - TLS Handshake Protocol：密钥协商 + 身份验证
        
- **证书机制**：
    
    - TLS证书由权威CA颁发，包含**服务器公钥+域名绑定信息**
        

---

### 3. **SNMP（简单网络管理协议）**

- 管理 IP 网络上的设备
    
- **组件**：
    
    - Manager：发出请求，收集信息
        
    - Agent：驻留在设备上，响应请求
        
    - NMS：网络管理系统，集中管理平台
        

---

### 4. **IPSec（网络层加密）**

- 用于 VPN 安全通信的协议框架
    
- **安全服务**：
    
    - 数据完整性（防篡改）
        
    - 源验证
        
    - 机密性（加密）
        
    - 访问控制
        
- **协议**：
    
    - **AH**（认证头）：完整性+源验证
        
    - **ESP**：加密+完整性+防重放
        
    - **IKEv2**：安全协商密钥管理协议
        

---

### 5. **GnuPG（GNU隐私卫士）**

GnuPG 是基于 OpenPGP 的开源加密工具，支持数据加密、数字签名与身份认证，广泛用于邮件隐私通信和密钥管理。

- OpenPGP 实现，支持非对称加密
    
- **流程**：
    
    1. 生成公钥 + 私钥
        
    2. 用对方公钥加密消息（只能用私钥解密）
        
    3. 用自己私钥签名，别人可用你公钥验证签名
        
- 应用：加密邮件、文件、验证身份

总结: 加密用**对方公钥**，签名用**自己私钥**，验证靠**对方私钥 / 自己公钥**

1. 加密通信流程（机密性）

| 步骤             | 操作命令（GPG示例）                        | 说明            |
| -------------- | ---------------------------------- | ------------- |
| ① 生成密钥对        | `gpg --gen-key`                    | 创建自己的公钥/私钥    |
| ② 导出并交换公钥      | `gpg --export -a 用户名 > pubkey.asc` | 发送公钥给通信对方     |
| ③ 导入对方公钥       | `gpg --import 对方pubkey.asc`        | 保存对方公钥到本地     |
| ④ 用对方公钥加密文件/信息 | `gpg -e -r 对方用户名 file.txt`         | 只有对方能用私钥解密    |
| ⑤ 对方用私钥解密      | `gpg -d file.txt.gpg`              | 解密后恢复原文件/消息内容 |

2. 数字签名流程（认证 + 完整性）

| 步骤         | 操作命令（GPG示例）                          | 说明                  |
| ---------- | ------------------------------------ | ------------------- |
| ① 生成密钥对    | 同上                                   |                     |
| ② 签名文件     | `gpg -s file.txt`                    | 生成带签名的 file.txt.gpg |
| ③ 或分离签名    | `gpg --detach-sign file.txt`         | 单独生成签名 file.txt.sig |
| ④ 对方导入你的公钥 | `gpg --import pubkey.asc`            |                     |
| ⑤ 对方验证签名   | `gpg --verify file.txt.sig file.txt` | 可判断是否被篡改 + 是否你签发    |

---

### 6. **MQTT（物联网消息协议）**

- 轻量级发布/订阅模型，适合低带宽、远程设备通信
    
- 特点：
    
    - TCP传输
        
    - 固定报文头2字节
        
    - 多QoS等级（0,1,2）
        
- 应用：智能家居、远程监控、农业传感器、医疗设备
    

---

### 7. **CoAP（受限应用协议）**

- 为物联网中低功耗设备设计的**UDP协议**
    
- 支持：REST风格、资源URI、GET/POST等方法
    
- 模型支持：
    
    - 请求-响应
        
    - 发布-订阅（观察者模式）
        
- 可靠性机制：**确认消息 vs 非确认消息**
    
- 应用：智能表计、医疗穿戴设备、工业监控
    

---

### 8. **Zigbee**

- 基于 IEEE 802.15.4 的无线通信协议
    
- 特点：
    
    - 低功耗、低速率、低成本
        
    - 支持 **Mesh/星型/树状**网络拓扑
        
- 应用：烟雾报警、智能家居、工业控制、医疗数据采集
    

---

### 9. **Thread 协议**

- **基于IPv6 的Mesh协议**，同样使用 802.15.4 频段
    
- 特点：
    
    - 每个设备可直接用IP通信
        
    - 支持自愈网络、自主寻址、安全认证
        
    - 专为未来大规模IoT设计
        
- 与Zigbee对比：
    
    - Zigbee有完整应用层
        
    - Thread更偏向底层网络协议
        

---

## ✅ MQTT vs CoAP 对比总结

|项目|MQTT|CoAP|
|---|---|---|
|协议类型|TCP，发布/订阅|UDP，请求/响应 + 订阅|
|报文头大小|固定2字节|固定4字节|
|QoS机制|支持0,1,2级|通过可确认/非确认消息实现可靠性|
|安全机制|支持 TLS|使用 DTLS|
|应用场景|大量终端、稳定网络|极度受限设备、无线或不稳定网络|

---
